- defaults:
    link:
        relink: true
        relative: true
        create: true
        force: true
    sync:
        rsync: 'rsync'                        # rsync executable to be used
        options: ['--delete', '--safe-links'] # list of options for rsync
        create: false                         # create missing directory hierarchy
        stdout: false                         # ignore stdout of rsync process
        stderr: false                         # ignore stderr of rsync process

- clean: [
    '~',
    '~/.nano.d',
    '~/.local/bin',
    '~/.config',
    '~/.config/Code/User',
    '~/.config/oni',
    '~/.config/tig'
  ]

- link:
    ~/.ackrc:
    ~/.aliases:
    ~/.agignore:
    ~/.bash:
    ~/.bash_aliases: bash/bashrc
    ~/.ctags:
    ~/.curlrc:
    ~/.config/Code/User/settings.json: vscode/settings.json
    ~/.config/nvim: vim
    ~/.config/oni/config.tsx: oni/config.tsx
    ~/.config/oni/.editorconfig: oni/editorconfig
    ~/.config/termite:
    ~/.config/tig/config: tigrc
    ~/.gitattributes: git/gitattributes
    ~/.gitconfig: git/gitconfig
    ~/.gitignore: git/gitignore
    ~/.gitk: git/gitk
    ~/.gvimrc: vim/gvimrc
    ~/.local/bin:
        glob: true
        path: bin/*
    ~/.nanorc: nano/nanorc
    ~/.nano.d/syntax-highlighting: nano/syntax-highlighting
    ~/.profile:
    ~/.pythonrc: python/pythonrc
    ~/.pylintrc: python/pylintrc
    ~/.ripgreprc:
    ~/.screenrc:
    ~/.ssh/rc: ssh/rc
    ~/.tmux:
    ~/.tmux.conf: tmux/tmux.conf
    ~/.vim:
    ~/.vimrc: vim/init.vim
    ~/.wgetrc:
    ~/.zsh:
    ~/.zshenv: zsh/zshenv
    ~/.zshprofile: zsh/zshenv
    ~/.zprofile: zsh/zprofile
    ~/.zshrc: zsh/zshrc

- sync:
    ~/.tmux.design.conf: tmux/design.conf

- if:
    os: darwin
    actions:
        clean: ['~/Library/Fonts']
        sync:
            ~/Library/Fonts/MyFonts: fonts
        brew:
            - rsync
            - the_silver_searcher
            - ctags

# Simple packages that don't have X/wm dependency but only if not minimal install
- if:
    and:
        os: linux
        shell: [ test "$INSTALL_TYPE" != "minimal" ]
    actions:
        apt:
            - build-essential
            - clang-format
            - exuberant-ctags
            - neovim
            - rsync
            - ruby
            - silversearcher-ag
            - tig
            - tmux
            - vim
            - zsh

# Packages needed when X is available and full install
- if:
    and:
        os: linux
        shell: [ test -n "$(command -v X)" -a "$INSTALL_TYPE" = "full" ]
    actions:
        clean: ['~/.local/share/fonts']
        link:
            ~/.config/compton.conf:
            ~/.config/dunst:
            ~/.config/i3:
            ~/.config/i3status:
            ~/.config/rofi:
            ~/.config/volumeicon:
            ~/.local/share/fonts:
                glob: true
                path: fonts/*
            ~/.urxvt:
            ~/.xsessionrc:
            ~/.xsettingsd:
            ~/.Xresources:
        shell:
            - [ test -z "$(command -v fc-cache)" || fc-cache -f ~/.local.share.fonts ]
        apt:
            - compton
            - dex
            - fonts-font-awesome
            - i3
            - mate-media
            - mate-control-center
            - mate-power-manager
            - mate-settings-daemon
            - playerctl
            - rofi
            - scrot
            - viewnior
            - volumeicon-alsa
            - xbacklight
            - xinput
            - xsecurelock
            - xss-lock

# Gnome settings if dconf is installed and full install
- if:
    and:
        os: linux
        shell: [ test -n "$(command -v dconf)" -a "$INSTALL_TYPE" = "full"]
    actions:
        link:
            ~/.config/dconf:
        shell:
            - [cat ~/.config/dconf/user.d/* | dconf load /, Loading dconf configurations]

- shell:
    - [git submodule update --init --recursive, Installing submodules]

- if:
    shell: [ test -n "$(command -v vim)"]
    actions:
        shell:
            - [vim +PlugInstall +qall, Installing Vim Plugins]

